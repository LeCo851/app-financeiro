<form [formGroup]="form" (ngSubmit)="save()" class="dialog-form">

  <div class="form-group">
    <label for="desc">Descrição</label>
    <input
      pInputText
      id="desc"
      formControlName="description"
      class="w-full"
      placeholder="Ex: Supermercado" />
  </div>

  <div class="form-group">
    <label>Tipo da Transação</label>
    <p-select
      [options]="types"
      formControlName="type"
      optionLabel="label"
      optionValue="value"
      styleClass="w-full"
      appendTo="body">
    </p-select>
    <small class="helper-text">Alterar o tipo pode inverter o sinal do valor.</small>
  </div>

  <div class="form-group">
    <label>Categoria</label>
    <p-select
      [options]="categories"
      formControlName="categoryId"
      optionLabel="label"
      optionValue="value"
      placeholder="Selecione uma categoria..."
      [filter]="true"
      filterBy="label"
      styleClass="w-full"
      appendTo="body">

      <ng-template let-cat pTemplate="item">
        <div class="category-item">
          <div class="category-icon" [style.background-color]="cat.color + '20'" [style.color]="cat.color">
            <i [class]="cat.icon"></i>
          </div>
          <span>{{ cat.label }}</span>
        </div>
      </ng-template>

      <ng-template let-cat pTemplate="selectedItem">
        <div class="category-item" *ngIf="cat">
          <div class="category-icon small" [style.background-color]="cat.color + '20'" [style.color]="cat.color">
            <i [class]="cat.icon"></i>
          </div>
          <span>{{ cat.label }}</span>
        </div>
      </ng-template>

    </p-select>
  </div>

  <div class="dialog-footer">
    <p-button
      label="Cancelar"
      icon="pi pi-times"
      [text]="true"
      severity="secondary"
      (onClick)="ref.close()">
    </p-button>

    <p-button
      label="Salvar Alterações"
      icon="pi pi-check"
      type="submit"
      [disabled]="form.invalid || form.pristine">
    </p-button>
  </div>
</form>
