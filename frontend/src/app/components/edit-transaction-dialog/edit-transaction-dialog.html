<form [formGroup]="form" (ngSubmit)="save()" class="flex flex-column gap-3 pt-2">

  <div class="field">
    <label for="desc">Descrição</label>
    <input pInputText id="desc" formControlName="description" class="w-full" />
  </div>

  <div class="field">
    <label>Tipo da Transação</label>
    <p-select
      [options]="types"
      formControlName="type"
      optionLabel="label"
      optionValue="value"
      styleClass="w-full"
      appendTo="body">
    </p-select>
    <small>Mudar para Despesa tornará o valor negativo.</small>
  </div>

  <div class="field">
    <label>Categoria</label>
    <p-select
      [options]="categories"
      formControlName="categoryId"
      optionLabel="label"
      optionValue="value"
      placeholder="Selecione..."
      [filter]="true"
      filterBy="label"
      styleClass="w-full"
      appendTo="body">

      <ng-template let-cat pTemplate="item">
        <div class="flex align-items-center gap-2">
          <i [class]="cat.icon" [style.color]="cat.color"></i>
          <span>{{ cat.label }}</span>
        </div>
      </ng-template>

      <ng-template let-cat pTemplate="selectedItem">
        <div class="flex align-items-center gap-2" *ngIf="cat">
          <i [class]="cat.icon" [style.color]="cat.color"></i>
          <span>{{ cat.label }}</span>
        </div>
      </ng-template>

    </p-select>
  </div>

  <div class="flex justify-content-end gap-2 mt-4">
    <button pButton label="Cancelar" type="button" class="p-button-text p-button-secondary" (click)="ref.close()"></button>
    <button pButton label="Salvar" type="submit" [disabled]="form.invalid || form.pristine"></button>
  </div>
</form>
